---
alias: DB
---
## Concepts

- Playlist: https://www.youtube.com/playlist?list=PLQnljOFTspQXjD0HOzN7P2tgzu7scWpl2
- Article: https://dev.to/basementdevs/database-for-newbies-n46
- Database consistency
- [[Database Schema]]
## Introduction

- Databases 
    - are structured digital information stores
    - build indices to efficiently query data
    - define relationships between datasets
- Every database has a way of structuring / organizing and interacting with this stored information: Database Management Systems (DBMS)
    - Fundamental ways of interacting with databases:
        - **C**reate
        - **R**ead
        - **U**pdate
        - **D**elete
        - Commonly known as CRUD
- DBMS's are mainly of two types:
    - **Relational**
        - organize data in tabular form with columns (categories / attributes) and rows (entries)
        - uses a structure that allows us to identify and access data in relation to another piece of data in the database. 
        - often, data is organized into tables.
        - highly structured
        - strict data types
        - great for complex datasets
        - SQL is used to interact with them
        - a [[Database Schema|schema]] needs to be defined before putting anything into a database
        - well known DBMS for these include MySQL & PostgreSQL.
    - **Non-relational** - which is also known as NoSQL; SQL is not used to interact with them.
        - generally more flexible and less strict
        - creating a schema isn't necessary
        - ideal for decentralised / distribured networks of data
        - e.g. graph, key-value, document
        - well known DBMS for these include MongoDB.

## Relational Databases

- **Row** / **Record** - a single entry in a table
- **Column** / **Field** - the smallest entity of a table
- **Constraint** - a restriction on the type or value that can be assigned to a `column`.
- **Primary Key**
    - A field which uniquely identifies each row/record in a database table.
    - Must contain unique, non-NULL values
    - is UNIQUE and NOT NULL implicitly.
    - A table can only have one primary key composed of single or multiple fields (*composite key*).
    - Generally created while the database and table are created, but can also be created after a table is created.
    - There are 3 types of Primary Keys:
        - **Surrogate Key**: Autogenerated by the database.
        - **Natural Key**: Naturally generated by the outside world.
        - **Composite Key**: The combination of 2 or more columns generates a unique identifier which you can utilize as the primary key.
- **Foreign Key**
    - aka *referencing key*.
    - Used to link two tables together.
    - A column or combination of columns whose values match a primary key in a different table.

### Referential Integrity

- Used to build and maintain logical relationships between tables to avoid logical corruption of data.
- Made up of the combination of a primary key and a foreign key.

- In such relationships, typically, the table with a Primary key is considered as a parent table and the table with a foreign key is considered a child table.
- Updating and Deletion in primary key table and Insertion and Updating in the foreign key table could violate the referential integrity.
    - To avoid violating Referential Integrity, ON DELETE CASCADE, set the foreign key to NULL, or set foreign key to default are implemented.


- [Cloudflare D1](https://developers.cloudflare.com/d1)
- [CockroachDB](https://www.cockroachlabs.com/product/)
- [Neon](https://neon.tech/)
- [PlanetScale](https://planetscale.com/)
- [Supabase](https://supabase.com/database)
## Non-relational (NoSQL) Databases

### Document Databases

- [MongoDB](https://www.mongodb.com/)
### Key-Value Databases

- [Redis](https://redis.io/)
- [Upstash](https://upstash.com/)
- [Vercel KV](https://vercel.com/storage/kv)
## Data Modelling

## Indexing

- An index is a database object that provides a fast and efficient way to look up and retrieve data from a table.
    - Typically a data structure that stores a sorted or hashed subset of a table's data.
    - Indexes improve the performance of `SELECT` queries by reducing the amount of data that needs to be scanned.
    - They can also enhance the performance of join operations.
    - DML operations can be slower because indexes need to be updated along with the data.
    - Indexes also consume additional space.

```postgresql
-- Create a Non-Clustered Index on 'Users'
CREATE INDEX idx_UserID ON Users(user_id);

-- Create a Clustered Index on 'Accounts'
CREATE INDEX idx_AccountID ON Accounts(account_id);

CLUSTER Accounts USING idx_AccountID;
```

> [!important]
> The order of operations is crucial.

## Data Integrity

## ORMs

- [Prisma](https://www.prisma.io/)
- [Sequelize](https://sequelize.org/)
## Transactions

- ACID

## Normalization

![[Normalization]]

### First Normal Form (1NF) 

- Conclusive of a relational database. 
- The elimination of recurring groups of relations. 
- Doesn't allow hierarchies of data values.
- For a database to be considered relational, all relations in the database are in 1NF.
    - A database is considered relational if all the fields in the tables are atomic, every column is a unique attribute, and a unique identifier or primary key is used. 

### Second Normal Form (2NF)

- Deals with the elimination of circular dependencies from a relation. 
- A relation is in 2NF if it is in 1NF and if every non-key attribute is completely dependent only on the Primary Key.
 
> [!note]
> A non-key attribute is any column that cannot be used to uniquely identify the table.

### Third Normal Form (3NF)

- Deals with the elimination of non-key attributes that do not describe the Primary Key. 
- For a relation to be in 3NF, the relationship between any two non-key attributes, or groups of non-key attributes, must not be in a one-to-one relation.
- Attributes should be mutually independent which means, none of the attributes should be functionally dependent on any combination of attributes. 
    - This ensures that any update on the individual attribute will not affect other attributes in a row.

### Boyce-Codd Normal Form (BCNF)

- An extension to the third normal form, and is also known as 3.5 Normal Form.
- A table should follow these two conditions to satisfy BCNF:
    - It should be in 3NF.
    - And, for any dependency A â†’ B, A should be a super key. which means that A should be a non-key attribute if B is a key attribute.

## Multiplicity

 - Defines the relationship between two tables.
 - Refers to the range of allowable values that specify how many instances of one entity can be associated with instances of another entity in a relationship.
 - Defines the minimum and maximum number of occurrences an entity can have in relation to another entity.
- **one to one relationship**
    - The table that references the other must have a foreign key column to the referenced table, which must have a `UNIQUE` constraint.
- **one to many relationship** / **many to one relationship**
    - The "many" table would have a foreign key to the "one" table
- **many to many relationship**
    - A third table needs to be created (called a junction table) that has a foreign key to both tables

```sqlITE
CREATE TABLE IF NOT EXISTS doctors (  
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    doctor_name VARCHAR(20) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS patients ( 
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_name VARCHAR(20) NOT NULL UNIQUE
);  

CREATE TABLE IF NOT EXISTS doctors_patients (
    patient_id INTEGER,
    doctor_id INTEGER,
    FOREIGN KEY (patient_id) REFERENCES patients(id),
    FOREIGN KEY (doctor_id) REFERENCES doctors(id),
    PRIMARY KEY (patient_id, doctor_id)
);

INSERT INTO doctors (doctor_name) 
VALUES ('Dr. John'), ('Dr. Bob'), ('Dr. Jane'), ('Dr. Alice');

INSERT INTO patients (patient_name) 
VALUES ('Charlie'), ('Lenny'), ('Smith'), ('Sam');  

INSERT INTO doctors_patients (patient_id, doctor_id)
VALUES (1,2), (3,1), (2, 2), (3,3), (1,4);

SELECT doctors.doctor_name, patients.patient_name 
FROM doctors
JOIN doctors_patients ON doctors.id = doctors_patients.doctor_id
JOIN patients ON patients.id = doctors_patients.patient_id;
```

## Security

- [How Does Role-Level Security Protect Your Data in SQL (YouTube)](https://www.youtube.com/watch?v=mGgGmdWbvtQ)

## Graph Databases

- [Dgraph](https://dgraph.io/)
## Multi-model Databases ==?==

## CMS

## Local-First Apps

- ElectricSQL

- TinyBase

---
## Further

### Books ðŸ“š

- Seven Databases in Seven Weeks (Eric Redmond)

### Learn ðŸ§ 

- [Prisma's Data Guide](https://www.prisma.io/dataguide)

### Reads ðŸ“„

- [A Shelfish Starter Guide to Databases](https://maggieappleton.com/databases)

### Videos ðŸŽ¥

![How do Databases Work? (YouTube)](https://www.youtube.com/watch?v=FnsIJAaGRk4)

![7 Database Paradigms - Fireship (YouTube)](https://youtube.com/watch?v=W2Z7fbCLSTw)

